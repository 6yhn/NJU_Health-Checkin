name: NJU_Health_Checkin

on:
  workflow_dispatch:
  schedule:
    - cron: "0 4 * * *"
    # 对应的中国时间(UTC+8)为每天中午12点

jobs:
  checkin:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-python@v3
        with:
          python-version: 3.8
      - name: Run
        env:
          User_Agent: ${{ secrets.User_Agent }}
          Cookie: ${{ secrets.Cookie }}
          location: ${{ secrets.location }}
          body_temp_ok: ${{ secrets.body_temp_ok }}
          health_status: ${{ secrets.health_status }}
          my_health_code_color: ${{ secrets.my_health_code_color }}
          fam_mem_health_code_color: ${{ secrets.fam_mem_health_code_color }}
          last_RNA: ${{ secrets.last_RNA }}
          try_N_times: ${{ secrets.try_N_times }}
        run: python decodeEnv.py && python checkin.py